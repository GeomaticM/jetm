<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en_US" xml:lang="en_US">
<head>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1"/>
  <title>Java(TM) Execution Time Measurement Library</title>
  <link rel="stylesheet" type="text/css" href="../default.css"/>
</head>

<body>

<div id="content">
<div id="header">Java&trade; Execution Time Measurement Library</div>

<div id="subheader">The swiss army knife of the poor</div>

<div id="main">
  <p style="color: red">
    <b>Warning:</b> This feature is currently under development and may undergo change before JETM 1.2.0 final.
  </p>

  <h3>JETM Springframework 2.x integration</h3>

  <p>
    If you are aready use the new Spring 2.x schema based configuration you can use the JETM namespace to configure
    JETM monitoring. Be aware that these <a href="spring_integration.html#prerequisites_constraints">prerequisites and
    constraints</a> apply.
  </p>

  <h4>Step I: Initialize JETM runtime</h4>

  <p>
    In order to use JETM performance monitoring you need to add the JETM runtime to your Spring 2.x configuration.
    All you need to do is to add the JETM namespace and a tag called <i>jetm:runtime</i> as seen below.
  </p>

  <div class="code"><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       <b>xmlns:jetm="http://jetm.void.fm/schema/jetm-spring-config-1.2"</b>
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
                           <b>http://jetm.void.fm/schema/jetm-spring-config-1.2
                             http://jetm.void.fm/schema/jetm-spring-config-1.2.xsd</b>"&gt;

  <b>&lt;jetm:runtime /&gt;</b>
&lt;/beans&gt;</pre>
  </div>
  <p>
    Please note that the runtime definition should be done in your root configuration.
  </p>
  <h4>Step II: Add performance monitoring</h4>

  <p>
   ...
  </p>

  <div class="code"><pre>&lt;jetm:monitoring&gt;
  &lt;jetm:bean-pattern&gt;<b>*Service,MyBean</b>&lt;/jetm:bean-pattern&gt;
&lt;/jetm:monitoring&gt;</pre>
  </div>

  <h4>Step III: Enable access to aggregated results</h4>

  <p>
    If you want to access the collected and aggregated performance results you may either use a standalone
    HTTP console or a dedicated servlet. For standalone HTTP console simply add the following fragment to your
    Spring configuration, for servlet based monitoring see <a href="spring_web_integration.html">Spring
    web integration</a>.
  </p>

  <div class="code">
    <pre>&lt;jetm:console /&gt;</pre>
  </div>
  <p>The standalone console listens at port 40000 by default.</p>

  <h4>Optional: Further configuration options</h4>

  <p>
    ...
  </p>

  <h5>JETM features</h5>

  <p>The following example used a flat monitor that monitors executions times using System.currentTimeMillis. It will
    buffer collected details for 5000 miliseconds before aggregating them. Additionally aggregated performance results
    will survive VM restarts, see <a href="aggregation_persistence.html">Aggregation Persistence</a> for further
    details.</p>

  <div class="code"><pre>&lt;jetm:runtime type="flat" timer="default"&gt;
  &lt;jetm:features&gt;
    &lt;jetm:interval-buffer interval="5000"/&gt;
    &lt;jetm:persistence /&gt;
  &lt;/jetm:features&gt;
&lt;/jetm:runtime&gt;</pre>
  </div>

  <h5>JETM aggregation chain</h5>

  <p>Alternatively you may define the used aggreation chain similar to xml based EtmManager configuration. The
    chain consists of one root chain element and n chain elements.</p>

  <div class="code"><pre>&lt;jetm:runtime&gt;
  &lt;jetm:aggregator-chain&gt;
    &lt;jetm:chain-element class="etm.core.aggregation.BufferedTimedAggregator"&gt;
      &lt;jetm:property name="aggregationInterval"&gt;10000&lt;/jetm:property&gt;
    &lt;/jetm:chain-element&gt;
    &lt;jetm:chain-element class="etm.contrib.aggregation.log.CommonsLoggingAggregator"&gt;
      &lt;jetm:property name="logName"&gt;my.application.raw-performance-data&lt;/jetm:property&gt;
    &lt;/jetm:chain-element&gt;
    &lt;jetm:chain-root class="etm.core.aggregation.NestedAggregator" /&gt;
  &lt;/jetm:aggregator-chain&gt;
&lt;/jetm:runtime&gt;</pre>
  </div>

  <h5>JETM plugins</h5>

  <p></p>

  <div class="code"><pre>&lt;jetm:runtime&gt;
  &lt;jetm:extension&gt;
    &lt;jetm:plugin class="etm.contrib.renderer.plugin.Log4jDumpOnShutdownPlugin"&gt;
      &lt;jetm:property name="logName"&gt;my.log.category&lt;/jetm:property&gt;
    &lt;/jetm:plugin&gt;
  &lt;/jetm:extension&gt;
&lt;/jetm:runtime&gt;</pre>
  </div>


  <h5>Standalone HTTP console properties</h5>

  <p>The build-in console can be configured using the optional attributes <i>listen-port</i>, <i>worker-size</i> and
    <i>runtime-ref</i>.</p>

  <div class="code">
    <pre>&lt;jetm:console listen-port="<b>45000</b>" worker-size="<b>3</b>"/&gt;</pre>
  </div>

</div>

<div id="menu">
  <a href="../index.html">Home</a>
  |
  <a href="../doc.html">Documentation</a>
  |
  <a href="../faq.html">FAQ</a>
  |
  <a href="../@api@/index.html">JavaDoc</a>
  |
  <a href="../files.html">Download</a>
  |
  <a href="../svn.html">SVN</a>
  |
  <a href="http://sourceforge.net/mail/?group_id=109626">Mailing Lists</a>
  |
  <a href="http://sourceforge.net/projects/jetm/">Sourceforge Project Page</a>
</div>
</div>
</body>
<!-- Last modified  $Date$ -->
</html>